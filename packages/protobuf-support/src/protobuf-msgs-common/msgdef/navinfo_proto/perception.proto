syntax = "proto2";

import "header.proto";
import "geometry.proto";
import "common.proto";

package davinci_adas.apa.perception;

enum ImageObstacleCategory {
  SEG_FREESPACE = 0;
  SEG_PERSON = 1;
  SEG_WALL = 2;
  SEG_CAR = 3;
  SEG_OTHER = 4;
  SEG_WHEELCHAIR = 5;
  SEG_BABY_CARRIAGE = 6;
  SEG_TRAFFIC_CONE = 7;
  SEG_GROUND_LOCK_OPEN = 8;
  SEG_ROADSIDE = 9;
  SEG_PARKING_SPACE_LINE = 10;
  SEG_ZEBRA_CROSSING = 11;
  SEG_NO_STOP_LINE = 12;
  SEG_WHEEL_STOPPER = 13;
  SEG_DECELERATION_ZONE = 14;
  SEG_LANELINE = 15;
  SEG_FIRE_EXTINGUISHER = 16;
  SEG_BACKGROUND = 17;
  SEG_GROUND_LOCK_CLOSE = 18;
  SEG_UNKNOWN = 199;
}

enum MessageStatus {
  MESSAGE_OK = 0;
  MESSAGE_ABNORMAL = 1;
  MESSAGE_UNKNOWN = 2;
  MESSAGE_APA_PERCEPTION_OK = 1000;
  MESSAGE_APA_PERCEPTION_FAILED = 1001;
  MESSAGE_APA_PERCEPTION_INIT_FAILED = 1100;
  MESSAGE_APA_PERCEPTION_INPUT_DATA_ERROR = 1101;
  MESSAGE_APA_PERCEPTION_PARAMETER_LOAD_FAILED = 1102;
  MESSAGE_APA_PERCEPTION_NO_INPUT_DATA = 1200;
  MESSAGE_APA_PERCEPTION_IMAGE_DECODE_ERR = 1201;
  MESSAGE_APA_PERCEPTION_SYS_NOT_ACTIVE = 1202;
  MESSAGE_APA_PERCEPTION_FREESPACE_OK = 3000;
  MESSAGE_APA_PERCEPTION_FREESPACE_ABNORMAL = 3001;
  MESSAGE_APA_PERCEPTION_FREESPACE_UNKNOWN = 3002;
  MESSAGE_APA_PERCEPTION_PARKING_SLOT_OK = 4000;
  MESSAGE_APA_PERCEPTION_PARKING_SLOT_ABNORMAL = 4001;
  MESSAGE_APA_PERCEPTION_PARKING_SLOT_UNKNOWN = 4002;
  MESSAGE_ULTRASONIC_RADAR_OK = 5000;
  MESSAGE_ULTRASONIC_RADAR_ABNORMAL = 5001;
  MESSAGE_ULTRASONIC_RADAR_UNKNOWN = 5002;
  MESSAGE_ULTRASONIC_SYS_INIT_FAILED = 5003;
  MESSAGE_ULTRASONIC_SYS_NOT_ACTIVE = 5004;
  MESSAGE_ULTRASONIC_PAS_ABNORMAL = 5100;
  MESSAGE_ULTRASONIC_FLS_SENSOR_ABNORMAL = 5101;
  MESSAGE_ULTRASONIC_FL_SENSOR_ABNORMAL = 5102;
  MESSAGE_ULTRASONIC_FLM_SENSOR_ABNORMAL = 5103;
  MESSAGE_ULTRASONIC_FRM_SENSOR_ABNORMAL = 5104;
  MESSAGE_ULTRASONIC_FR_SENSOR_ABNORMAL = 5105;
  MESSAGE_ULTRASONIC_FRS_SENSOR_ABNORMAL = 5106;
  MESSAGE_ULTRASONIC_RLS_SENSOR_ABNORMAL = 5107;
  MESSAGE_ULTRASONIC_RL_SENSOR_ABNORMAL = 5108;
  MESSAGE_ULTRASONIC_RLM_SENSOR_ABNORMAL = 5109;
  MESSAGE_ULTRASONIC_RRM_SENSOR_ABNORMAL = 5110;
  MESSAGE_ULTRASONIC_RR_SENSOR_ABNORMAL = 5111;
  MESSAGE_ULTRASONIC_RRS_SENSOR_ABNORMAL = 5112;
  MESSAGE_ULTRASONIC_DATA_SYNC_ABNORMAL = 5200;
  MESSAGE_ULTRASONIC_DATA_SYNC_INIT_FAILED = 5201;
  MESSAGE_ULTRASONIC_DATA_SYNC_OBS_GROUP_FAILED = 5202;
  MESSAGE_ULTRASONIC_DATA_SYNC_ULTR_RAW_DATA_FAILED = 5203;
  MESSAGE_ULTRASONIC_DATA_SYNC_ODM_FAILED = 5204;
  MESSAGE_ULTRASONIC_OBS_MAP_ABNORMAL = 5300;
  MESSAGE_ULTRASONIC_OBS_MAP_INIT_FAILED = 5301;
  MESSAGE_ULTRASONIC_OBS_CORRECTED_FAILED = 5302;
  MESSAGE_ULTRASONIC_OBS_CLUSTER_FAILED = 5303;
  MESSAGE_ULTRASONIC_OBS_MATCH_FAILED = 5304;
  MESSAGE_ULTRASONIC_OBS_CONTOUR_FAILED = 5305;
  MESSAGE_ULTRASONIC_OBS_FUSION_FAILED = 5306;
  MESSAGE_ULTRASONIC_OBS_GROUP_ABNORMAL = 5400;
  MESSAGE_ULTRASONIC_OBS_GROUP_INIT_FAILED = 5401;
  MESSAGE_ULTRASONIC_OBS_GROUP_FAILED = 5402;
  MESSAGE_ULTRASONIC_SLOT_ABNORMAL = 5500;
  MESSAGE_ULTRASONIC_SLOT_INIT_FAILED = 5501;
  MESSAGE_ULTRASONIC_SLOT_FAILED = 5502;
  MESSAGE_ULTRASONIC_SLOT_VEH_SPEED_ABNORMAL = 5503;
  MESSAGE_ULTRASONIC_SLOT_SIDE_DIS_ABNORMAL = 5504;
  MESSAGE_ULTRASONIC_SLOT_CORNER_FAILED = 5505;
  MESSAGE_ULTRASONIC_SLOT_LENGTH_FAILED = 5506;
  MESSAGE_ULTRASONIC_SLOT_DEEPTH_FAILED = 5507;
  MESSAGE_ODOMETRY_OK = 6000;
  MESSAGE_ODOMETRY_ABNORMAL = 6001;
  MESSAGE_ODOMETRY_UNKNOWN = 6002;
  MESSAGE_FUSION_OK = 7000;
  MESSAGE_FUSION_ABNORMAL = 7001;
  MESSAGE_FUSION_SYS_INIT_FAILED = 7002;
  MESSAGE_FUSION_SYS_IN_RESET_MODE = 7003;
  MESSAGE_FUSION_SYS_NOT_ACTIVE = 7004;
  MESSAGE_FUSION_SYNC_DATA_ABNORMAL = 7100;
  MESSAGE_FUSION_SYNC_DATA_INIT_FAILED = 7101;
  MESSAGE_FUSION_SLOT_TRACK_ABNORMAL = 7200;
  MESSAGE_FUSION_SLOT_TRACK_INIT_FAILED = 7201;
  MESSAGE_FUSION_SLOT_TRACK_FAILED = 7202;
  MESSAGE_FUSION_SLOT_FUSION_ABNORMAL = 7300;
  MESSAGE_FUSION_SLOT_FUSION_INIT_FAILED = 7301;
  MESSAGE_FUSION_SLOT_FUSION_FAILED = 7302;
  MESSAGE_FUSION_SLOT_FUSION_MATCH_FAILED = 7303;
  MESSAGE_FUSION_SLOT_FUSION_INPUT_IMG_INVALID = 7304;
  MESSAGE_FUSION_SLOT_FUSION_PARKINTO_INIT_FAILED = 7305;
  MESSAGE_FUSION_SLOT_FUSION_PARKINTO_END_POSE_FAILED = 7306;
  MESSAGE_FUSION_SLOT_FUSION_OCCUPIED_FAILED = 7307;
  MESSAGE_FUSION_SLOT_FUSION_PARKINTO_INPUT_SLOT_INVALID = 7308;
  MESSAGE_FUSION_SLOT_FUSION_ID_PERCEPTTYPE_FAILED = 7309;
  MESSAGE_FUSION_SLOT_FUSION_JUDGE_TYPE_FAILED = 7310;
  MESSAGE_FUSION_SLOT_FUSION_SLOT_LOCATION_MANAGE_FAILED = 7311;
  MESSAGE_FUSION_SLOT_FUSION_GET_PHISYCAL_BOUND_FAILED = 7312;
  MESSAGE_FUSION_SLOT_FUSION_JUDGE_PARK_MODE_FAILED = 7313;
  MESSAGE_FUSION_SLOT_FUSION_PARK_END_SLOT_FAILED = 7314;
  MESSAGE_FUSION_SLOT_FUSION_INPUT_MAP_INVALID = 7315;
  MESSAGE_FUSION_SLOT_FUSION_OCR_FAILED = 7316;
  MESSAGE_FUSION_SLOT_FUSION_END_SLOT_FAILED = 7317;
  MESSAGE_FUSION_SLOT_FUSION_CORRIDOR_ACROSS_FAILED = 7318;
  MESSAGE_FUSION_SLOT_FUSION_PARKOUT_FRONT_NO_OBS = 7319;
  MESSAGE_FUSION_SLOT_FUSION_PARKOUT_LENGTH_NARROW_SPACE = 7320;
  MESSAGE_FUSION_SLOT_FUSION_PARKOUT_WIDTH_NARROW_SPACE = 7321;
  MESSAGE_FUSION_SLOT_FUSION_SLOT_LIFE_FAILED = 7322;
  MESSAGE_FUSION_SLOT_FUSION_RECOMMEND_ORDER_FAILED = 7323;
  MESSAGE_FUSION_SLOT_FUSION_STOPPER_TYPE_FAILED = 7324;
  MESSAGE_FUSION_SLOT_FUSION_RELEASE_SPACE_FAILED = 7325;
  MESSAGE_FUSION_SEMANTIC_MAP_ABNORMAL = 7400;
  MESSAGE_FUSION_SEMANTIC_MAP_INIT_FAILED = 7401;
  MESSAGE_FUSION_SEMANTIC_MAP_SERIALIZE_FAILED = 7402;
  MESSAGE_FUSION_OBSTACLE_FUSION_ABNORMAL = 7500;
  MESSAGE_FUSION_OBSTACLE_FUSION_INIT_FAILED = 7501;
  MESSAGE_FUSION_OBSTACLE_MODULE_FAILED = 7502;
  MESSAGE_FUSION_OBSTACLE_FUSION_MATCH_FAILED = 7503;
  MESSAGE_FUSION_OBSTACLE_GET_CONTOURS_FAILED = 7504;
  MESSAGE_FUSION_OBSTACLE_UPDATE_FAILED = 7506;
  MESSAGE_FUSION_OBSTACLE_MANAGE_FAILED = 7507;
  MESSAGE_FUSION_OBSTACLE_INVALID_FUSION_MAP = 7508;
  MESSAGE_FUSION_OBSTACLE_GET_CACHE_FAILED = 7509;
  MESSAGE_FUSION_APP_REQUEST_ABNORMAL = 7600;
  MESSAGE_FUSION_APP_REQUEST_TIME_ABNORMAL = 7601;
  MESSAGE_FUSION_APP_REQUEST_NO_NEED_TO_SWITCH = 7602;
  MESSAGE_FUSION_APP_REQUEST_CHECK_MCU_FAILED = 7603;
  MESSAGE_FUSION_APP_REQUEST_NO_TARGET_SLOT_ID = 7604;
  MESSAGE_FUSION_APP_REQUEST_INVALID_TARGET_SLOT_ID = 7605;
  MESSAGE_FUSION_APP_REQUEST_TO_TERMINATE = 7606;
  MESSAGE_FUSION_APP_REQUEST_WORK_MODE_NOT_SUPPORT = 7607;
  MESSAGE_FUSION_APP_REQUEST_RUNNING_STATUS_NOT_SUPPORT = 7608;
  MESSAGE_FUSION_APP_REQUEST_WORK_MODE_NOT_MATCH = 7609;
  MESSAGE_PNC_PATH_PLAN_FAILED = 8001;
  MESSAGE_PNC_OBSTACLE_INTERRUPTED = 8002;
  MESSAGE_PNC_OBSTACLE_REMOVED = 8003;
  MESSAGE_PNC_PARKING_COMPLETED = 8004;
  MESSAGE_PNC_PATH_PLAN_SUCCESS = 8005;
  MESSAGE_PNC_REQUESTED_SLOT_NOT_EXIST = 8006;
  MESSAGE_PNC_TARGET_SLOT_DIFF_TOO_LARGE = 8007;
  MESSAGE_PNC_ODOM_ABNORMAL = 8008;
}

message ImageGroundObstacleObject {
  optional ImageObstacleCategory obs_category = 1;

  optional float obs_category_score = 2;
  optional davinci_adas.apa.common.ObjectPointLocation loc_img = 3;
  optional davinci_adas.apa.common.ObjectPointPointsScore loc_img_score = 4;
  optional float object_point_score = 5;
  optional float object_score = 6;
}
message CurbGroundline {
  repeated davinci_adas.apa.geometry.Point2Df loc_curb = 1;
}
message StopperBoxes {
  repeated davinci_adas.apa.geometry.Point2Df loc_stopper = 1;
}
message ObjectPointsEntry {
  optional uint32 key = 1;
  optional davinci_adas.apa.perception.ImageGroundObstacleObject value = 2;
}

message LocCurbEntry {
  optional uint32 key = 1;
  optional davinci_adas.apa.perception.CurbGroundline value = 2;
}

message LocStopperEntry {
  optional uint32 key = 1;
  optional davinci_adas.apa.perception.StopperBoxes value = 2;
}
message ImageObstaclesInfo {
  optional apollo.common.Header header = 1;

  repeated davinci_adas.apa.perception.ObjectPointsEntry object_points = 2;
  optional MessageStatus msg_status = 3;
  repeated davinci_adas.apa.perception.LocCurbEntry loc_curb = 4;
  repeated davinci_adas.apa.perception.LocStopperEntry loc_stopper = 5;
}
